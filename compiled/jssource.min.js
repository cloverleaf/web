function checkDebug(){debugMode&&(document.title="Perdola - Debug "+(new Date).getTime(),debug("Enabling debug css"),$("<link>").attr("rel","stylesheet").attr("type","text/css").attr("href","debug.css").appendTo("head"))}function debug(e){debugMode&&console.log(e)}function getQueryStrings(){var e={},t=function(e){return decodeURIComponent(e.replace(/\+/g," "))},a=location.search.substring(1).split("&");for(var o in a){var n=a[o].split("=");n.length>1&&(e[t(n[0])]=t(n[1]))}return e}function passwordToggle(){$("#passwordToggle").prop("checked")?$("#pass").attr("type","password"):$("#pass").attr("type","text")}function changeTheme(e){if(""==e)e=defaultTheme;else{if(!themeData[e])throw"invalid theme: "+e;document.cookie="theme="+e+"; expires=Fri, 31 Dec 9999 23:59:59 GMT; path=/;";document.getElementsByTagName("html")[0];document.documentElement.style.setProperty("--accentColor",themeData[e].accent),document.documentElement.style.setProperty("--lightAccent",themeData[e].lightAccent),document.documentElement.style.setProperty("--textColor",themeData[e].text),document.documentElement.style.setProperty("--backgroundColor",themeData[e].background),document.documentElement.style.setProperty("--internalColor",themeData[e].internal),document.documentElement.style.setProperty("--incorrectColor",themeData[e].incorrect),document.documentElement.style.setProperty("--correctColor",themeData[e].correct),document.documentElement.style.setProperty("--inputColor",themeData[e].inputColor),document.documentElement.style.setProperty("--linkColor",themeData[e].linkColor),document.documentElement.style.setProperty("--highlightColor",themeData[e].highlightColor)}}function process(){var e="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ!\"#$%&'()*+,-./:;<=>?@[\\]^_`{|}~",t=[],a=$("#app").val(),o=$("#pass").val(),n=Math.trunc($("#length").val()),s="",l=defaultMinLength;if(""==a||""==o||""==n)return $("#result").text(""),$("#copy").hide(),"App / pass empty";if(jsonData[a]){if(debug("Found preset: "+a),jsonData[a].alias&&(a=jsonData[a].alias),"chars"in jsonData[a]&&(e=jsonData[a].chars),"requirements"in jsonData[a])for(i=0;i<jsonData[a].requirements.length;i++)t.push(possibleRequirements[jsonData[a].requirements[i]]);"minLength"in jsonData[a]&&(l=jsonData[a].minLength),"uniqueCharacters"in jsonData[a]&&(uniqueCharacters=jsonData[a].uniqueCharacters)}if(!(l<=n&&n<=maxLength))return $("#result").text(""),void $("#copy").css("display","none");for(debug("Started generating password"),Math.seedrandom(a.toLowerCase()+o);;){for(s="";s.length<n;)s+=e[Math.floor(Math.random()*e.length)];if(t==[])break;var r=!1;for(i=0;i<t.length;i++)for(c=0;c<t[i].length&&-1==s.indexOf(t[i][c]);c++)if(t[i].indexOf(t[i][c])==t[i].length-1){r=!0;break}if(!r)break}$("#result").text(s),$("#copy").css("display","block")}function updateLimits(){var e=$("#app").val();if(reBindMouse(defaultMinLength,defaultMaxLength),$("#length").attr("min",defaultMinLength),$("#length").attr("max",defaultMaxLength),minLength=defaultMinLength,maxLength=defaultMaxLength,jsonData[e]){if(jsonData[e].alias&&jsonData[jsonData[e].alias])e=jsonData[e].alias;else if(jsonData[e].alias&&!jsonData[jsonData[e].alias])throw"Invalid alias";"minLength"in jsonData[e]&&jsonData[e].minLength!=minLength&&(minLength=jsonData[e].minLength,$("#length").attr("min",minLength),reBindMouse(minLength)),"maxLength"in jsonData[e]&&jsonData[e].maxLength!=maxLength&&(maxLength=jsonData[e].maxLength,$("#length").attr("max",maxLength),reBindMouse(minLength,maxLength))}}function reBindMouse(e,t){void 0===e&&(e=defaultMinLength),void 0===t&&(t=defaultMaxLength),$("#length").unbind("mousewheel"),$("#length").on("mousewheel",function(a,o){return o>0?parseInt(this.value)<t&&(parseInt(this.value)<e?this.value=e:this.value=parseInt(this.value)+1,process()):parseInt(this.value)>e&&(parseInt(this.value)>t?this.value=t:this.value=parseInt(this.value)-1,process()),!1})}function save(){$("#pass").val()&&(document.cookie="password="+$("#pass").val()+"; expires=Fri, 31 Dec 9999 23:59:59 GMT; path=/;",Materialize.toast("Password saved to your device!",4e3,"success"))}function getCookie(e){var t=("; "+document.cookie).split("; "+e+"=");if(2==t.length)return t.pop().split(";").shift()}function load(){if(void 0!=getCookie("password")){var e=getCookie("password");$("label[for='pass']").addClass("active"),$("#pass").val(e),process(),Materialize.toast("Password loaded from your device!",4e3,"success")}else Materialize.toast("You have no saved password to load.",4e3,"warning")}console.clear();var lastName="",autoCompleteData={},jsonData={},defaultMinLength=1,defaultMaxLength=512,minLength=defaultMinLength,maxLength=defaultMaxLength,defaultTheme="Vanilla",themeData={},debugMode=!1,possibleRequirements={cap:"ABCDEFGHIJKLMNOPQRSTUVWXYZ",low:"abcdefghijklmnopqrstuvwxyz",num:"0123456789",special:"!\"#$%&'()*+,-./:;<=>?@[\\]^_`{|}~"};$(function(){updateLimits(),reBindMouse(),$.getJSON("data/sites.json",function(e){jsonData=e;var t=getQueryStrings();if(t.app){var a=String(t.app);if(jsonData[a]){lastName=a,history.pushState(a,a);var o=16,n=e[a].maxLength;n||(n=defaultMaxLength),e[a].minLength<=16&&16<=n||(o=e[a].maxLength),$("#length").val(o),process(),e[a].logo?logo=e[a].logo:logo="logos/"+a+".svg",$("#logoContainer").css("display","flex"),$("img#logo").attr("src",logo),$("img#logo").attr("alt",a),$("img#logo").attr("title",a)}$("#app").val(a),$("label[for='app']").addClass("active")}$.each(e,function(e,t){t.logo?autoCompleteData[e]=t.logo:autoCompleteData[e]="logos/"+e+".svg"}),$("input#app").autocomplete({data:autoCompleteData,onAutocomplete:function(t){lastName=t,history.pushState(t,t);var a=16,o=e[t].maxLength;o||(o=defaultMaxLength),debug(o),e[t].minLength<=16&&16<=o||(a=e[t].maxLength),$("#length").val(a),process(),$("#logoContainer").css("display","flex"),debug(autoCompleteData[t]),$("img#logo").attr("src",autoCompleteData[t]),$("img#logo").attr("alt",t),$("img#logo").attr("title",t)},minLength:0}),$("#app").focus()}),$.getJSON("data/themes.json",function(e){themeData=e,$.each(themeData,function(e,t){$("#themeForm").append("<p><input name='themes' class='with-gap' onclick='changeTheme(\""+e+"\");' type='radio' id='"+e+"' /><label for='"+e+"'></label></p>"),$("head").append("<style>form label[for="+e+"]::before{background-color: "+themeData[e].accent+" !important; border: none !important;}</style>"),$("head").append("<style>form label[for="+e+"]::after{border: none !important; transform: scale(0.6) !important; background-color: "+themeData[e].background+" !important;}</style>")}),void 0!=getCookie("theme")?(debug("Found a prefered theme. Loading "+getCookie("theme")),changeTheme(getCookie("theme")),$("#"+getCookie("theme")).prop("checked",!0)):($("input[name='themes'][type=radio]").first().prop("checked",!0),changeTheme(defaultTheme))}),new Clipboard("#copy").on("success",function(e){Materialize.toast("Successfully copied!",4e3,"success")}),$("#pass").on("keyup",function(e){process()}),$("#app").on("keyup",function(e){13==e.which&&$("ul.autocomplete-content").height()>0&&(debug("Enter on dropdown"),$("ul.autocomplete-content li:first").mousedown());var t=$("#app").val();lastName!=t&&(lastName=t,history.pushState(t,t),process(),$("#logoContainer").css("display","none"),$("img#logo").removeAttr("src"),$("img#logo").removeAttr("alt"),$("img#logo").removeAttr("title"))}),$("#length").on("input",function(e){process()}),checkDebug()}),window.onpopstate=function(e){$("#app").val(history.state),""!=$("#app").val()?$("label[for='app']").addClass("active"):$("label[for='app']").removeClass("active"),process()};
//# sourceMappingURL=jssource.min.js.map